{
  "rules": {
    "players": {
      "$uid": {
        ".read": true,
        ".write": "auth != null && $uid === auth.uid",
        ".validate": "newData.hasChildren(['username', 'character', 'x', 'y', 'color', 'timestamp'])",
        "username": {
          ".validate": "newData.isString() && newData.val().length >= 3 && newData.val().length <= 20 && !newData.val().matches(/[<>]/)"
        },
        "character": {
          ".validate": "newData.isString() && (newData.val() === 'warrior' || newData.val() === 'mage' || newData.val() === 'tank' || newData.val() === 'marksman')"
        },
        "x": {
          ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 10000"
        },
        "y": {
          ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 10000"
        },
        "color": {
          ".validate": "newData.isString() && newData.val().matches(/^#[0-9A-Fa-f]{6}$/)"
        },
        "timestamp": {
          ".validate": "newData.val() == null || newData.isNumber()"
        }
      }
    }
  }
}

